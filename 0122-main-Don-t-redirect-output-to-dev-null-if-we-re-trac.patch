From 3cce620e75a62931a777f911d2508a980d183275 Mon Sep 17 00:00:00 2001
From: "Jasper St. Pierre" <jstpierre@mecheye.net>
Date: Wed, 29 Oct 2014 16:28:04 -0700
Subject: [PATCH] main: Don't redirect output to /dev/null if we're tracing

Otherwise, our input will mysteriously disappear.
---
 src/main.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/main.c b/src/main.c
index 2edc678..8efb7ee 100644
--- a/src/main.c
+++ b/src/main.c
@@ -1933,7 +1933,8 @@ initialize_environment (state_t *state)
         state->entry_buffer = ply_buffer_new ();
         state->messages = ply_list_new ();
 
-        redirect_standard_io_to_dev_null ();
+        if (!ply_is_tracing ())
+                redirect_standard_io_to_dev_null ();
 
         ply_trace ("Making sure " PLYMOUTH_RUNTIME_DIR " exists");
         if (!ply_create_directory (PLYMOUTH_RUNTIME_DIR))
-- 
1.9.0

